spring:
  application:
    name: binance-trader
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration
  codec:
    max-in-memory-size: 5MB

binance:
  base-url: https://fapi.binance.com
  testnet-base-url: https://testnet.binancefuture.com
  use-testnet: false
  api-key: ${BINANCE_API_KEY:}
  secret-key: ${BINANCE_SECRET_KEY:}
  recv-window-millis: 5000

strategy:
  active: CTI_LB
  reference-symbol: MANAUSDT
  trade-symbol: MANAUSDT
  trade-symbols:
    - ETHUSDT
    - XRPUSDT
    - DOGEUSDT
    - LTCUSDT
    - ADAUSDT
    - AVAXUSDT
    - ARBUSDT
    - MANAUSDT
    - XLMUSDT
    - CHZUSDT
    - ALGOUSDT
    - BANDUSDT
    - BATUSDT
    - CHRUSDT
    - POLUSDT


  depth-limit: 50
  market-quantity: 0.01
  leverage: 2
  position-side: LONG
  enable-orders: false
  startup-test-order-enabled: false
  poll-interval-ms: 500
  tick-interval-ms: 100
  rolling-window-ms: 800
  depth-levels: 12
  weight-lambda: 0.25
  obi-entry: 0.055
  obi-entry-long: 0.055
  obi-entry-short: 0.045
  obi-exit: 0.020
  toi-min: 0.035
  toi-min-long: 0.035
  toi-min-short: 0.030
  cancel-max: 0.92
  cancel-max-long: 0.98
  cancel-max-short: 0.98
  persist-ms: 180
  exit-persist-ms: 450
  cooldown-ms: 650
  max-spread-bps: 10
  position-notional-usdt: 50
  stop-loss-bps: 18
  take-profit-bps: 22
  # ---- Risk management ----
  take-profit-pct: 0.20
  stop-loss-pct: 0.10
  quantity-step: 1
  roi-exit-enabled: true
  roi-take-profit-pct: 20
  roi-stop-loss-pct: 20
  price-tick: 0.01
  max-daily-loss-usdt: 100
  max-consecutive-losses: 3
  max-position-usdt: 50
  flip-enabled: true
  min-hold-ms: 30000
  flip-cooldown-ms: 60000
  strong-obi: 0.085
  strong-toi: 0.060
  max-flips-per-5-min: 2
  min-bfr-delta: 0.002
  min-price-move-bps: 10
  enable-tie-break-bias: false
  startup-smoke-test-enabled: false
  filter-refresh-ttl-ms: 300000
  arming-window-minutes: 5
  late-limit-minutes: 12
  moved-dir-pct-late-gate: 1.0
  chase-max-move-pct: 0.40
  enable-flip-on-opposite-exit: true
  opposite-exit-flip-cooldown-ms: 2000
  flip-spread-max-bps: 12
  max-trades-per-5-min: 10
  hard-trade-cooldown-ms: 2500
  rsi-long-min: 45
  rsi-long-max: 75
  rsi-short-min: 25
  rsi-short-max: 55
  vol-spike-mult: 1.3
  atr-cap-mult: 2.2
  entry-quality-min: 55
  extreme-rsi-block: true
  extreme-rsi-high: 85
  extreme-rsi-low: 15
  extreme-atr-block-mult: 3.0
  bbSpikeBlockEnabled: true
  # ---- BB false-entry blocks (defaults ON) ----
  bb-overbought-long-block-enabled: true
  bb-overbought-long-pct-b: 0.72
  bb-overbought-long-rsi: 60.0
  trail-activate-pct: 0.35
  trail-retrace-pct: 0.20
  trend-hold-min-profit-pct: 0.15
  continuation-quality-min: 55
  continuation-min-bars: 3
  continuation-max-retrace-pct: 0.35
  flip-fast-quality: 70
  trend-hold-enabled: true
  trend-hold-min-adx: 20
  ema20-hold-buffer-pct: 0.0015
  flip-quality-min: 60
  trend-hold-max-bars: 40
  tp-trailing-enabled: true
  tp-start-pct: 0.25
  tp-trail-pct: 0.15
  enable-long-quality-gate: true
  long-min-bb-width: 0.010
  enable-long-rsi-quality: true
  long-rsi-min: 45
  long-rsi-max: 60
  long-bb-chase-pb-min: 0.80
  enable-long-setup4: false
  enable-short-macd-delta-negative-gate: true
  enable-short-s2-only: true
  enable-short-s6: true
  short-s6-vol-ratio-min: 2.2
  short-s6-bb-width-min: 0.020
  short-s6-ema20-dist-min: 0.010
  short-s6-adx-min: 25
  enable-reversal-exit-only-when-profitable: true
  close-in-flight-cooldown-bars: 1
  long-setups:
    setup1:
      bbWidthMin: 0.0114
      bbWidthMax: 0.0130
      volMin: 0.8
      volMax: 1.0
    setup2:
      bbWidthMin: 0.0100
      bbWidthMax: 0.0114
      volMin: 1.0
      volMax: 1.2
    setup3:
      bbWidthMin: 0.0100
      bbWidthMax: 0.0114
      ema20DistMin: 0.0005
      ema20DistMax: 0.0010
    setup4:
      bbWidthMin: 0.0080
      bbWidthMax: 0.0100
      ema20DistMin: 0.0010
      ema20DistMax: 0.0015
    setup5:
      rsiMin: 35
      rsiMax: 45
      ema20DistMin: 0.004
  short-setups:
    s1:
      bbWidthMin: 0.0130
      bbWidthMax: 0.0160
      ema20DistMin: 0.0005
      ema20DistMax: 0.0010
    s2:
      rsiMin: 40
      rsiMax: 45
      ema20DistMin: 0.0040
      ema20DistMax: 0.0060
    s3:
      bbWidthMin: 0.0080
      bbWidthMax: 0.0100
      rsiMin: 55
      rsiMax: 60
    s4:
      bbPercentBMin: 0.60
      bbPercentBMax: 0.75
      macdDeltaMin: 0.00001
      macdDeltaMax: 0.00005
    s5:
      adxMin: 12.5
      adxMax: 15.0
      macdDeltaMinExclusive: 0.00005
    s6:
      volRatioMin: 2.2
      bbWidthMin: 0.020
      ema20DistMin: 0.010
      adxMin: 25

warmup:
  enabled: true
  candles1m: 250
  candles5m: 200
  concurrency: 3
  log-decisions: false
  decision-log-every: 0

management:
  endpoints:
    web:
      exposure:
        include: health,info
